-- MySQL Script generated by MySQL Workbench
-- Thu Jan 20 00:12:09 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`REGION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`REGION` (
  `idREGION` INT NOT NULL,
  PRIMARY KEY (`idREGION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`COMUNA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`COMUNA` (
  `idCOMUNA` INT NOT NULL,
  `REGION_idREGION` INT NOT NULL,
  PRIMARY KEY (`idCOMUNA`, `REGION_idREGION`),
  INDEX `fk_COMUNA_REGION_idx` (`REGION_idREGION` ASC) VISIBLE,
  CONSTRAINT `fk_COMUNA_REGION`
    FOREIGN KEY (`REGION_idREGION`)
    REFERENCES `mydb`.`REGION` (`idREGION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CALLE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CALLE` (
  `idCALLE` INT NOT NULL,
  `REGION_idREGION` INT NOT NULL,
  `COMUNA_idCOMUNA` INT NOT NULL,
  `COMUNA_REGION_idREGION` INT NOT NULL,
  PRIMARY KEY (`idCALLE`, `REGION_idREGION`, `COMUNA_idCOMUNA`, `COMUNA_REGION_idREGION`),
  INDEX `fk_CALLE_REGION1_idx` (`REGION_idREGION` ASC) VISIBLE,
  INDEX `fk_CALLE_COMUNA1_idx` (`COMUNA_idCOMUNA` ASC, `COMUNA_REGION_idREGION` ASC) VISIBLE,
  CONSTRAINT `fk_CALLE_REGION1`
    FOREIGN KEY (`REGION_idREGION`)
    REFERENCES `mydb`.`REGION` (`idREGION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CALLE_COMUNA1`
    FOREIGN KEY (`COMUNA_idCOMUNA` , `COMUNA_REGION_idREGION`)
    REFERENCES `mydb`.`COMUNA` (`idCOMUNA` , `REGION_idREGION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DIRECCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DIRECCION` (
  `idDIRECCION` INT NOT NULL,
  `CALLE_idCALLE` INT NOT NULL,
  `CALLE_REGION_idREGION` INT NOT NULL,
  `CALLE_COMUNA_idCOMUNA` INT NOT NULL,
  `CALLE_COMUNA_REGION_idREGION` INT NOT NULL,
  `REGION_idREGION` INT NOT NULL,
  `COMUNA_idCOMUNA` INT NOT NULL,
  `COMUNA_REGION_idREGION` INT NOT NULL,
  PRIMARY KEY (`idDIRECCION`, `CALLE_idCALLE`, `CALLE_REGION_idREGION`, `CALLE_COMUNA_idCOMUNA`, `CALLE_COMUNA_REGION_idREGION`, `REGION_idREGION`, `COMUNA_idCOMUNA`, `COMUNA_REGION_idREGION`),
  INDEX `fk_DIRECCION_CALLE1_idx` (`CALLE_idCALLE` ASC, `CALLE_REGION_idREGION` ASC, `CALLE_COMUNA_idCOMUNA` ASC, `CALLE_COMUNA_REGION_idREGION` ASC) VISIBLE,
  INDEX `fk_DIRECCION_REGION1_idx` (`REGION_idREGION` ASC) VISIBLE,
  INDEX `fk_DIRECCION_COMUNA1_idx` (`COMUNA_idCOMUNA` ASC, `COMUNA_REGION_idREGION` ASC) VISIBLE,
  CONSTRAINT `fk_DIRECCION_CALLE1`
    FOREIGN KEY (`CALLE_idCALLE` , `CALLE_REGION_idREGION` , `CALLE_COMUNA_idCOMUNA` , `CALLE_COMUNA_REGION_idREGION`)
    REFERENCES `mydb`.`CALLE` (`idCALLE` , `REGION_idREGION` , `COMUNA_idCOMUNA` , `COMUNA_REGION_idREGION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DIRECCION_REGION1`
    FOREIGN KEY (`REGION_idREGION`)
    REFERENCES `mydb`.`REGION` (`idREGION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DIRECCION_COMUNA1`
    FOREIGN KEY (`COMUNA_idCOMUNA` , `COMUNA_REGION_idREGION`)
    REFERENCES `mydb`.`COMUNA` (`idCOMUNA` , `REGION_idREGION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PERSONA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PERSONA` (
  `rut` INT NOT NULL,
  `DIRECCION_idDIRECCION` INT NOT NULL,
  PRIMARY KEY (`rut`, `DIRECCION_idDIRECCION`),
  INDEX `fk_PERSONA_DIRECCION1_idx` (`DIRECCION_idDIRECCION` ASC) VISIBLE,
  CONSTRAINT `fk_PERSONA_DIRECCION1`
    FOREIGN KEY (`DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`DIRECCION` (`idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`USUARIO` (
  `PERSONA_rut` INT NOT NULL,
  `PERSONA_DIRECCION_idDIRECCION` INT NOT NULL,
  PRIMARY KEY (`PERSONA_rut`, `PERSONA_DIRECCION_idDIRECCION`),
  CONSTRAINT `fk_USUARIO_PERSONA1`
    FOREIGN KEY (`PERSONA_rut` , `PERSONA_DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`PERSONA` (`rut` , `DIRECCION_idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ADMIN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ADMIN` (
  `USUARIO_PERSONA_rut` INT NOT NULL,
  `USUARIO_PERSONA_DIRECCION_idDIRECCION` INT NOT NULL,
  PRIMARY KEY (`USUARIO_PERSONA_rut`, `USUARIO_PERSONA_DIRECCION_idDIRECCION`),
  CONSTRAINT `fk_ADMIN_USUARIO1`
    FOREIGN KEY (`USUARIO_PERSONA_rut` , `USUARIO_PERSONA_DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`USUARIO` (`PERSONA_rut` , `PERSONA_DIRECCION_idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`INSTITUCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`INSTITUCION` (
  `idINSTITUCION` INT NOT NULL,
  `DIRECCION_idDIRECCION` INT NOT NULL,
  PRIMARY KEY (`idINSTITUCION`, `DIRECCION_idDIRECCION`),
  INDEX `fk_INSTITUCION_DIRECCION1_idx` (`DIRECCION_idDIRECCION` ASC) VISIBLE,
  CONSTRAINT `fk_INSTITUCION_DIRECCION1`
    FOREIGN KEY (`DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`DIRECCION` (`idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`VERIFICACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`VERIFICACION` (
  `idVERIFICACION` INT NOT NULL,
  `ADMIN_USUARIO_PERSONA_rut` INT NOT NULL,
  PRIMARY KEY (`idVERIFICACION`, `ADMIN_USUARIO_PERSONA_rut`),
  INDEX `fk_VERIFICACION_ADMIN1_idx` (`ADMIN_USUARIO_PERSONA_rut` ASC) VISIBLE,
  CONSTRAINT `fk_VERIFICACION_ADMIN1`
    FOREIGN KEY (`ADMIN_USUARIO_PERSONA_rut`)
    REFERENCES `mydb`.`ADMIN` (`USUARIO_PERSONA_rut`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`VERIFICADOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`VERIFICADOR` (
  `USUARIO_PERSONA_rut` INT NOT NULL,
  `USUARIO_PERSONA_DIRECCION_idDIRECCION` INT NOT NULL,
  `INSTITUCION_idINSTITUCION` INT NOT NULL,
  `VERIFICACION_idVERIFICACION` INT NOT NULL,
  PRIMARY KEY (`USUARIO_PERSONA_rut`, `USUARIO_PERSONA_DIRECCION_idDIRECCION`, `INSTITUCION_idINSTITUCION`, `VERIFICACION_idVERIFICACION`),
  INDEX `fk_VERIFICADOR_INSTITUCION1_idx` (`INSTITUCION_idINSTITUCION` ASC) VISIBLE,
  INDEX `fk_VERIFICADOR_VERIFICACION1_idx` (`VERIFICACION_idVERIFICACION` ASC) VISIBLE,
  CONSTRAINT `fk_VERIFICADOR_USUARIO1`
    FOREIGN KEY (`USUARIO_PERSONA_rut` , `USUARIO_PERSONA_DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`USUARIO` (`PERSONA_rut` , `PERSONA_DIRECCION_idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VERIFICADOR_INSTITUCION1`
    FOREIGN KEY (`INSTITUCION_idINSTITUCION`)
    REFERENCES `mydb`.`INSTITUCION` (`idINSTITUCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VERIFICADOR_VERIFICACION1`
    FOREIGN KEY (`VERIFICACION_idVERIFICACION`)
    REFERENCES `mydb`.`VERIFICACION` (`idVERIFICACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`INFORMANTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`INFORMANTE` (
  `USUARIO_PERSONA_rut` INT NOT NULL,
  `USUARIO_PERSONA_DIRECCION_idDIRECCION` INT NOT NULL,
  `VERIFICACION_idVERIFICACION` INT NOT NULL,
  PRIMARY KEY (`USUARIO_PERSONA_rut`, `USUARIO_PERSONA_DIRECCION_idDIRECCION`, `VERIFICACION_idVERIFICACION`),
  INDEX `fk_INFORMANTE_VERIFICACION1_idx` (`VERIFICACION_idVERIFICACION` ASC) VISIBLE,
  CONSTRAINT `fk_INFORMANTE_USUARIO1`
    FOREIGN KEY (`USUARIO_PERSONA_rut` , `USUARIO_PERSONA_DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`USUARIO` (`PERSONA_rut` , `PERSONA_DIRECCION_idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_INFORMANTE_VERIFICACION1`
    FOREIGN KEY (`VERIFICACION_idVERIFICACION`)
    REFERENCES `mydb`.`VERIFICACION` (`idVERIFICACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CUSTODIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CUSTODIA` (
  `PERSONA_rut` INT NOT NULL,
  `PERSONA_DIRECCION_idDIRECCION` INT NOT NULL,
  PRIMARY KEY (`PERSONA_rut`, `PERSONA_DIRECCION_idDIRECCION`),
  CONSTRAINT `fk_CUSTODIA_PERSONA1`
    FOREIGN KEY (`PERSONA_rut` , `PERSONA_DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`PERSONA` (`rut` , `DIRECCION_idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CARGA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CARGA` (
  `PERSONA_rut` INT NOT NULL,
  `PERSONA_DIRECCION_idDIRECCION` INT NOT NULL,
  `CUSTODIA_PERSONA_rut` INT NOT NULL,
  `CUSTODIA_PERSONA_DIRECCION_idDIRECCION` INT NOT NULL,
  `INFORMANTE_USUARIO_PERSONA_rut` INT NOT NULL,
  PRIMARY KEY (`PERSONA_rut`, `PERSONA_DIRECCION_idDIRECCION`, `CUSTODIA_PERSONA_rut`, `CUSTODIA_PERSONA_DIRECCION_idDIRECCION`, `INFORMANTE_USUARIO_PERSONA_rut`),
  INDEX `fk_CARGA_CUSTODIA1_idx` (`CUSTODIA_PERSONA_rut` ASC, `CUSTODIA_PERSONA_DIRECCION_idDIRECCION` ASC) VISIBLE,
  INDEX `fk_CARGA_INFORMANTE1_idx` (`INFORMANTE_USUARIO_PERSONA_rut` ASC) VISIBLE,
  CONSTRAINT `fk_CARGA_PERSONA1`
    FOREIGN KEY (`PERSONA_rut` , `PERSONA_DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`PERSONA` (`rut` , `DIRECCION_idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CARGA_CUSTODIA1`
    FOREIGN KEY (`CUSTODIA_PERSONA_rut` , `CUSTODIA_PERSONA_DIRECCION_idDIRECCION`)
    REFERENCES `mydb`.`CUSTODIA` (`PERSONA_rut` , `PERSONA_DIRECCION_idDIRECCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CARGA_INFORMANTE1`
    FOREIGN KEY (`INFORMANTE_USUARIO_PERSONA_rut`)
    REFERENCES `mydb`.`INFORMANTE` (`USUARIO_PERSONA_rut`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CONDENA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CONDENA` (
  `idCONDENA` INT NOT NULL,
  `INFORMANTE_USUARIO_PERSONA_rut` INT NOT NULL,
  PRIMARY KEY (`idCONDENA`, `INFORMANTE_USUARIO_PERSONA_rut`),
  INDEX `fk_CONDENA_INFORMANTE1_idx` (`INFORMANTE_USUARIO_PERSONA_rut` ASC) VISIBLE,
  CONSTRAINT `fk_CONDENA_INFORMANTE1`
    FOREIGN KEY (`INFORMANTE_USUARIO_PERSONA_rut`)
    REFERENCES `mydb`.`INFORMANTE` (`USUARIO_PERSONA_rut`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`MOTIVO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`MOTIVO` (
  `idMOTIVO` INT NOT NULL,
  `CONDENA_idCONDENA` INT NOT NULL,
  `CONDENA_INFORMANTE_USUARIO_PERSONA_rut` INT NOT NULL,
  PRIMARY KEY (`idMOTIVO`, `CONDENA_idCONDENA`, `CONDENA_INFORMANTE_USUARIO_PERSONA_rut`),
  INDEX `fk_MOTIVO_CONDENA1_idx` (`CONDENA_idCONDENA` ASC, `CONDENA_INFORMANTE_USUARIO_PERSONA_rut` ASC) VISIBLE,
  CONSTRAINT `fk_MOTIVO_CONDENA1`
    FOREIGN KEY (`CONDENA_idCONDENA` , `CONDENA_INFORMANTE_USUARIO_PERSONA_rut`)
    REFERENCES `mydb`.`CONDENA` (`idCONDENA` , `INFORMANTE_USUARIO_PERSONA_rut`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`LOGIN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`LOGIN` (
  `idLOGIN` INT NOT NULL,
  `USUARIO_PERSONA_rut` INT NOT NULL,
  PRIMARY KEY (`idLOGIN`, `USUARIO_PERSONA_rut`),
  INDEX `fk_LOGIN_USUARIO1_idx` (`USUARIO_PERSONA_rut` ASC) VISIBLE,
  CONSTRAINT `fk_LOGIN_USUARIO1`
    FOREIGN KEY (`USUARIO_PERSONA_rut`)
    REFERENCES `mydb`.`USUARIO` (`PERSONA_rut`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
